webpackJsonp([1],{0:function(t,n){},1:function(t,n){},"1/oy":function(t,n){},"9M+g":function(t,n){},EeSn:function(t,n){},GQmB:function(t,n){},Id91:function(t,n){},Jmt5:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e("Jmt5"),e("9M+g");var i=e("7+uW"),a={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var r=e("VU/8")({name:"App"},a,!1,function(t){e("W43E")},null,null).exports,o=e("/ocq"),s=e("Xxa5"),h=e.n(s),c=e("exGp"),u=e.n(c),l=e("EJLk"),d=e.n(l),p=e("bOdI"),v=e.n(p);
/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */
function _(t,n,e){this.x=t,this.y=n,this.time=e||(new Date).getTime()}function f(t,n,e,i){this.startPoint=t,this.control1=n,this.control2=e,this.endPoint=i}function m(t,n){var e=this,i=n||{};this.velocityFilterWeight=i.velocityFilterWeight||.7,this.minWidth=i.minWidth||.5,this.maxWidth=i.maxWidth||2.5,this.throttle="throttle"in i?i.throttle:16,this.minDistance="minDistance"in i?i.minDistance:5,this.throttle?this._strokeMoveUpdate=function(t,n,e){var i,a,r,o=null,s=0;e||(e={});var h=function(){s=!1===e.leading?0:Date.now(),o=null,r=t.apply(i,a),o||(i=a=null)};return function(){var c=Date.now();s||!1!==e.leading||(s=c);var u=n-(c-s);return i=this,a=arguments,u<=0||u>n?(o&&(clearTimeout(o),o=null),s=c,r=t.apply(i,a),o||(i=a=null)):o||!1===e.trailing||(o=setTimeout(h,u)),r}}(m.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=m.prototype._strokeUpdate,this.dotSize=i.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=i.penColor||"black",this.backgroundColor=i.backgroundColor||"rgba(0,0,0,0)",this.onBegin=i.onBegin,this.onEnd=i.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(e._mouseButtonDown=!0,e._strokeBegin(t))},this._handleMouseMove=function(t){e._mouseButtonDown&&e._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&e._mouseButtonDown&&(e._mouseButtonDown=!1,e._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var n=t.changedTouches[0];e._strokeBegin(n)}},this._handleTouchMove=function(t){t.preventDefault();var n=t.targetTouches[0];e._strokeMoveUpdate(n)},this._handleTouchEnd=function(t){t.target===e._canvas&&(t.preventDefault(),e._strokeEnd(t))},this.on()}_.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},_.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},_.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},f.prototype.length=function(){for(var t=0,n=void 0,e=void 0,i=0;i<=10;i+=1){var a=i/10,r=this._point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this._point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var s=r-n,h=o-e;t+=Math.sqrt(s*s+h*h)}n=r,e=o}return t},f.prototype._point=function(t,n,e,i,a){return n*(1-t)*(1-t)*(1-t)+3*e*(1-t)*(1-t)*t+3*i*(1-t)*t*t+a*t*t*t},m.prototype.clear=function(){var t=this._ctx,n=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),this._data=[],this._reset(),this._isEmpty=!0},m.prototype.fromDataURL=function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new Image,a=e.ratio||window.devicePixelRatio||1,r=e.width||this._canvas.width/a,o=e.height||this._canvas.height/a;this._reset(),i.src=t,i.onload=function(){n._ctx.drawImage(i,0,0,r,o)},this._isEmpty=!1},m.prototype.toDataURL=function(t){var n;switch(t){case"image/svg+xml":return this._toSVG();default:for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];return(n=this._canvas).toDataURL.apply(n,[t].concat(i))}},m.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},m.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},m.prototype.isEmpty=function(){return this._isEmpty},m.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},m.prototype._strokeUpdate=function(t){var n=t.clientX,e=t.clientY,i=this._createPoint(n,e),a=this._data[this._data.length-1],r=a&&a[a.length-1],o=r&&i.distanceTo(r)<this.minDistance;if(!r||!o){var s=this._addPoint(i),h=s.curve,c=s.widths;h&&c&&this._drawCurve(h,c.start,c.end),this._data[this._data.length-1].push({x:i.x,y:i.y,time:i.time,color:this.penColor})}},m.prototype._strokeEnd=function(t){var n=this.points.length>2,e=this.points[0];if(!n&&e&&this._drawDot(e),e){var i=this._data[this._data.length-1],a=i[i.length-1];e.equals(a)||i.push({x:e.x,y:e.y,time:e.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},m.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},m.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},m.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},m.prototype._createPoint=function(t,n,e){var i=this._canvas.getBoundingClientRect();return new _(t-i.left,n-i.top,e||(new Date).getTime())},m.prototype._addPoint=function(t){var n=this.points;if(n.push(t),n.length>2){3===n.length&&n.unshift(n[0]);var e=this._calculateCurveControlPoints(n[0],n[1],n[2]).c2,i=this._calculateCurveControlPoints(n[1],n[2],n[3]).c1,a=new f(n[1],e,i,n[2]),r=this._calculateCurveWidths(a);return n.shift(),{curve:a,widths:r}}return{}},m.prototype._calculateCurveControlPoints=function(t,n,e){var i=t.x-n.x,a=t.y-n.y,r=n.x-e.x,o=n.y-e.y,s=(t.x+n.x)/2,h=(t.y+n.y)/2,c=(n.x+e.x)/2,u=(n.y+e.y)/2,l=Math.sqrt(i*i+a*a),d=Math.sqrt(r*r+o*o),p=d/(l+d),v=c+(s-c)*p,f=u+(h-u)*p,m=n.x-v,g=n.y-f;return{c1:new _(s+m,h+g),c2:new _(c+m,u+g)}},m.prototype._calculateCurveWidths=function(t){var n=t.startPoint,e=t.endPoint,i={start:null,end:null},a=this.velocityFilterWeight*e.velocityFrom(n)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(a);return i.start=this._lastWidth,i.end=r,this._lastVelocity=a,this._lastWidth=r,i},m.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},m.prototype._drawPoint=function(t,n,e){var i=this._ctx;i.moveTo(t,n),i.arc(t,n,e,0,2*Math.PI,!1),this._isEmpty=!1},m.prototype._drawCurve=function(t,n,e){var i=this._ctx,a=e-n,r=Math.floor(t.length());i.beginPath();for(var o=0;o<r;o+=1){var s=o/r,h=s*s,c=h*s,u=1-s,l=u*u,d=l*u,p=d*t.startPoint.x;p+=3*l*s*t.control1.x,p+=3*u*h*t.control2.x,p+=c*t.endPoint.x;var v=d*t.startPoint.y;v+=3*l*s*t.control1.y,v+=3*u*h*t.control2.y,v+=c*t.endPoint.y;var _=n+c*a;this._drawPoint(p,v,_)}i.closePath(),i.fill()},m.prototype._drawDot=function(t){var n=this._ctx,e="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.beginPath(),this._drawPoint(t.x,t.y,e),n.closePath(),n.fill()},m.prototype._fromData=function(t,n,e){for(var i=0;i<t.length;i+=1){var a=t[i];if(a.length>1)for(var r=0;r<a.length;r+=1){var o=a[r],s=new _(o.x,o.y,o.time),h=o.color;if(0===r)this.penColor=h,this._reset(),this._addPoint(s);else if(r!==a.length-1){var c=this._addPoint(s),u=c.curve,l=c.widths;u&&l&&n(u,l,h)}}else this._reset(),e(a[0])}},m.prototype._toSVG=function(){var t=this,n=this._data,e=this._canvas,i=Math.max(window.devicePixelRatio||1,1),a=e.width/i,r=e.height/i,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"width",e.width),o.setAttributeNS(null,"height",e.height),this._fromData(n,function(t,n,e){var i=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){var a="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" C "+t.control1.x.toFixed(3)+","+t.control1.y.toFixed(3)+" "+t.control2.x.toFixed(3)+","+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);i.setAttribute("d",a),i.setAttribute("stroke-width",(2.25*n.end).toFixed(3)),i.setAttribute("stroke",e),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),o.appendChild(i)}},function(n){var e=document.createElement("circle"),i="function"==typeof t.dotSize?t.dotSize():t.dotSize;e.setAttribute("r",i),e.setAttribute("cx",n.x),e.setAttribute("cy",n.y),e.setAttribute("fill",n.color),o.appendChild(e)});var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+a+" "+r+'" width="'+a+'" height="'+r+'">',h=o.innerHTML;if(void 0===h){var c=document.createElement("dummy"),u=o.childNodes;c.innerHTML="";for(var l=0;l<u.length;l+=1)c.appendChild(u[l].cloneNode(!0));h=c.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+h+"</svg>")},m.prototype.fromData=function(t){var n=this;this.clear(),this._fromData(t,function(t,e){return n._drawCurve(t,e.start,e.end)},function(t){return n._drawDot(t)}),this._data=t},m.prototype.toData=function(){return this._data};var g=m,y={name:"Chalkboard",props:{penColor:{default:"#000"},backgroundColor:{default:"#FFF"}},data:function(){return{pad:null}},methods:{getImageVector:function(){return function(t){for(var n=t.canvas,e=t.columns,i=n.clientWidth,a=n.clientHeight,r=n.getContext("2d"),o=i/e,s=a/e,h=[],c=0;c<i;c+=o)for(var u=0;u<a;u+=s){var l=void 0===r.getImageData(c,u,o,s).data.find(function(t){return t>0});h.push(l?0:1)}return h}({canvas:this.$refs.canvas,columns:20})},clear:function(){this.pad.clear()},resizeCanvas:function(){var t=Math.max(window.devicePixelRatio||1,1),n=this.$refs.canvas;n.width=n.offsetWidth*t,n.height=n.offsetHeight*t,n.getContext("2d").scale(t,t),this.pad.clear()}},mounted:function(){var t=this.$refs.canvas,n={penColor:this.penColor};this.pad=new g(t,n),this.resizeCanvas()}},b={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"canvas",staticClass:"Chalkboard-canvas border",style:{"background-color":this.backgroundColor}})},staticRenderFns:[]};var w=e("VU/8")(y,b,!1,function(t){e("Yrgb")},"data-v-f752a902",null).exports,x={name:"Train",props:{shape:{required:!0}},components:{Chalkboard:w},data:function(){return{trainData:[]}},computed:{boards:function(){var t=this;return[1,2,3].map(function(n){return t.$refs["sample"+n]})}},methods:{getVectors:function(){return this.boards.map(function(t){return t.getImageVector()})},train:function(){var t=this.getVectors(),n=v()({},this.shape,1),e=t.map(function(t){return{input:t,output:n}});this.trainData=this.trainData.concat(e),this.$emit("trained",this.trainData)},clear:function(){this.boards.forEach(function(t){return t.clear()})}}},k={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("b-container",[e("h1",[t._v("Draw "+t._s(t.shape))]),t._v(" "),e("p",[t._v("Draw one "+t._s(t.shape)+" in each board. Click the button below after finishing the drawings.")]),t._v(" "),e("b-row",[e("b-col",[e("Chalkboard",{ref:"sample1"})],1),t._v(" "),e("b-col",[e("Chalkboard",{ref:"sample2"})],1),t._v(" "),e("b-col",[e("Chalkboard",{ref:"sample3"})],1)],1),t._v(" "),e("b-row",[e("b-col",[e("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:t.train}},[t._v("Save")]),t._v(" "),e("b-button",{staticClass:"float-right",attrs:{variant:"link"},on:{click:t.clear}},[t._v("Clear")])],1)],1)],1)},staticRenderFns:[]};var C=e("VU/8")(x,k,!1,function(t){e("EeSn")},"data-v-1d51ce31",null).exports,T={name:"TrainPage",components:{Train:C,Chalkboard:w},data:function(){return{trainData:[],training:!1,trainingError:null,trainingIterations:null,net:null,prediction:null}},methods:{onTrainedData:function(t){this.trainData=this.trainData.concat(t)},train:function(){var t=this;return u()(h.a.mark(function n(){var e,i,a,r;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.net||(t.net=new d.a.NeuralNetwork),t.trainingError=null,t.trainingIterations=null,t.training=!0,e={log:!0},n.next=7,t.net.trainAsync(t.trainData,e);case 7:i=n.sent,a=i.error,r=i.iterations,t.trainingError=a,t.trainingIterations=r,t.training=!1;case 13:case"end":return n.stop()}},n,t)}))()},check:function(){var t=this.$refs.test.getImageVector();this.prediction=d.a.likely(t,this.net)},clear:function(){this.$refs.test.clear(),this.prediction=null}}},E={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("b-container",[e("b-row",[e("b-col",[e("Train",{attrs:{shape:"circle"},on:{trained:t.onTrainedData}})],1)],1),t._v(" "),e("b-row",[e("b-col",[e("Train",{attrs:{shape:"square"},on:{trained:t.onTrainedData}})],1)],1),t._v(" "),e("b-row",[e("b-col",[e("b-alert",{attrs:{show:t.training}},[t._v("Training ...")]),t._v(" "),t.training?t._e():e("div",[e("b-button",{attrs:{variant:"primary"},on:{click:t.train}},[t._v("Train")]),t._v(" "),e("p",[t._v("Training error: "+t._s(t.trainingError))]),t._v(" "),e("p",[t._v("Training iterations: "+t._s(t.trainingIterations))])],1)],1),t._v(" "),e("b-col",[e("Chalkboard",{ref:"test"}),t._v(" "),e("b-button",{attrs:{variant:"success"},on:{click:t.check}},[t._v("Check")]),t._v(" "),e("b-button",{attrs:{variant:"link"},on:{click:t.clear}},[t._v("Clear")])],1),t._v(" "),e("b-col",[e("h2",[t._v("Results")]),t._v(" "),e("h1",[t._v(t._s(t.prediction))])])],1)],1)},staticRenderFns:[]};var D=e("VU/8")(T,E,!1,function(t){e("GQmB")},"data-v-06bcdacc",null).exports,P=e("Zrlr"),M=e.n(P),S=e("wxAW"),W=e.n(S),N=function(){function t(n){var e=n.name,i=n.data;if(M()(this,t),!(e&&e.length&&i&&i.length))throw new TypeError("name and data are required to create a shape");this.name=e,this.output=v()({},e,1),this.trainingData=i}return W()(t,[{key:"getTrainingData",value:function(){return this.trainingData}}]),t}(),A={name:"AddShape",components:{Train:C},data:function(){return{shape:{name:null,data:null}}},methods:{addShape:function(){try{var t=new N(this.shape);this.shape={name:null,data:null},this.$emit("shape",t)}catch(t){console.log(t)}}}},F={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("b-form",{on:{submit:function(n){return n.preventDefault(),t.addShape(n)}}},[e("b-form-group",{attrs:{label:"Shape name:","label-for":"shapeName",description:"The way anyone would call this shape"}},[e("b-form-input",{attrs:{id:"shapeName",type:"text",required:"",placeholder:"circle"},model:{value:t.shape.name,callback:function(n){t.$set(t.shape,"name",n)},expression:"shape.name"}})],1),t._v(" "),e("Train",{attrs:{shape:t.shape.name},on:{trained:function(n){t.shape.data=n}}}),t._v(" "),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Add shape")])],1)},staticRenderFns:[]};var R={name:"ShapesPage",components:{AddShape:e("VU/8")(A,F,!1,function(t){e("Nn9t")},"data-v-3bec49ce",null).exports,Chalkboard:w},data:function(){return{addingShape:!1,shapes:[],net:null,training:!1,trainingResults:{},trained:!1,prediction:null}},methods:{addShape:function(t){this.shapes.push(t),this.addingShape=!1},train:function(){var t=this;return u()(h.a.mark(function n(){var e;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.shapes.reduce(function(t,n){return t.concat(n.getTrainingData())},[]),t.net=new d.a.NeuralNetwork,t.training=!0,t.trained=!1,t.trainingResults=null,t.prediction=null,n.next=8,t.net.trainAsync(e,{log:!0});case 8:t.trainingResults=n.sent,t.training=!1,t.trained=!0;case 11:case"end":return n.stop()}},n,t)}))()},predict:function(){var t=this.$refs.canvasTest.getImageVector();this.prediction=d.a.likely(t,this.net)},clear:function(){this.$refs.canvasTest.clear(),this.prediction=null}},computed:{shapeNames:function(){return this.shapes.map(function(t){return t.name})}}},U={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("b-container",[e("b-row",[e("b-col",[e("h1",[t._v("Known shapes")]),t._v(" "),e("ul",t._l(t.shapeNames,function(n){return e("li",{key:n},[t._v("\n          "+t._s(n)+"\n        ")])})),t._v(" "),t.addingShape?t._e():e("b-button",{attrs:{variant:"outline-primary"},on:{click:function(n){t.addingShape=!0}}},[t._v("\n        Add shape\n      ")]),t._v(" "),t.shapeNames.length?e("b-button",{attrs:{variant:"primary"},on:{click:t.train}},[t._v("\n        Train\n      ")]):t._e(),t._v(" "),e("b-alert",{attrs:{show:t.training}},[t._v("Training ...")]),t._v(" "),t.trained?e("div",[e("p",[t._v("Training error: "+t._s(t.trainingResults.error))]),t._v(" "),e("p",[t._v("Training iterations: "+t._s(t.trainingResults.iterations))])]):t._e()],1),t._v(" "),t.addingShape?e("b-col",[e("AddShape",{on:{shape:t.addShape}})],1):t._e(),t._v(" "),t.trained&&!t.addingShape?e("b-col",[e("Chalkboard",{ref:"canvasTest"}),t._v(" "),e("div",[e("b-button",{attrs:{variant:"success"},on:{click:t.predict}},[t._v("Check")]),t._v(" "),e("b-button",{attrs:{variant:"link"},on:{click:t.clear}},[t._v("Clear")]),t._v(" "),e("h2",[t._v("Results")]),t._v(" "),e("h1",[t._v(t._s(t.prediction))])],1)],1):t._e()],1)],1)},staticRenderFns:[]};var L=e("VU/8")(R,U,!1,function(t){e("qnPT")},"data-v-2b6dbdf6",null).exports;i.a.use(o.a);var V=new o.a({routes:[{path:"/",name:"ShapesPage",component:L},{path:"/train",name:"TrainPage",component:D}]}),$=e("e6fC");i.a.use($.a),i.a.config.productionTip=!1,new i.a({el:"#app",router:V,components:{App:r},template:"<App/>"})},Nn9t:function(t,n){},W43E:function(t,n){},Yrgb:function(t,n){},qnPT:function(t,n){},zj2Q:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.f476855fa6a5f0042a95.js.map